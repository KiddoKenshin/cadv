/*! Fri Jan 05 2018 17:13:21 GMT+0900 (JST) */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.cadv=t():e.cadv=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _animejs=__webpack_require__(1),_animejs2=_interopRequireDefault(_animejs),_screenfull=__webpack_require__(3),_screenfull2=_interopRequireDefault(_screenfull);module.exports=function(){var cadv=void 0,system={debug:!1,stopOnError:!0,title:"Canvas_Adventure_Engine",version:"",width:1280,height:720,defaultBgColor:"#000000",screenScale:1,autoScale:!1,textSelector:void 0,textSpeed:30,useAudio:!1,masterVolume:1,bgmVolume:1,sfxVolume:1,voiceVolume:1,videoVolume:1},getSystemSetting=function(e){return void 0===system[e]?null:system[e]},setSystemSetting=function(e,t){return void 0===system[e]?null:(system[e]=t,system[e])},mobile=void 0,isMobile=function(){return void 0===mobile&&(mobile=!1,navigator.userAgent.match(/(iPad|iPhone|iPod|Android|android)/g)&&(mobile=!0)),mobile},getYmdHis=function(){var e=new Date;return e.getFullYear()+("0"+(e.getMonth()+1)).slice(-2)+("0"+e.getDate()).slice(-2)+("0"+e.getHours()).slice(-2)+("0"+e.getMinutes()).slice(-2)+("0"+e.getSeconds()).slice(-2)},log=function(e,t){system.debug},error=function(e){throw alert("Error occured, unable to proceed."),Error(e)},states={iDBInit:!1,startedPreload:!1,canvasRefresh:!1,outputingText:!1},iDBObject=null,iDBInit=function(){if(iDBObject=null,!window.indexedDB)return log("Indexed DB not available"),void(states.iDBInit=!0);var e=indexedDB.open("CADV_DB",1);e.onupgradeneeded=function(t){log("Initializing DB..."),iDBObject=e.result,iDBObject.objectStoreNames.contains("imageStorage")||(iDBObject.createObjectStore("imageStorage"),log("imageStorage Created")),iDBObject.objectStoreNames.contains("audioStorage")||(iDBObject.createObjectStore("audioStorage"),log("audioStorage Created")),iDBObject.objectStoreNames.contains("videoStorage")||(iDBObject.createObjectStore("videoStorage"),log("videoStorage Created"))},e.onsuccess=function(t){iDBObject=e.result,states.iDBInit=!0,log("DB Opened!")},e.onerror=function(e){states.iDBInit=!0,log("DB Failed!")}},storeToIndexedDB=function(e,t,n){if(null==iDBObject)return void log("iDB not available");var r=e.substring(0,e.length-1)+"Storage",o=iDBObject.transaction([r],"readwrite"),a=o.objectStore(r),i=a.put(n,t);i.onsuccess=function(n){log(t+"("+e+") stored.")},i.onerror=function(n){log(t+"("+e+") error while put into DB.")}},getFromIndexedDB=function(e,t,n){if(null==iDBObject)return log("iDB not available"),void n(e,t,null);var r=e.substring(0,e.length-1)+"Storage",o=iDBObject.transaction([r],"readonly"),a=o.objectStore(r),i=a.get(t);i.onsuccess=function(r){log(t+"("+e+") loaded."),n(e,t,i.result)},i.onerror=function(r){log(t+"("+e+") failed on retrieving."),n(e,t,null)}},removeFromIndexedDB=function(e,t){if(null==iDBObject)return void log("iDB not available");var n=e+"Storage",r=iDBObject.transaction([n],"readwrite"),o=r.objectStore(n),a=o.delete(t);a.onsuccess=function(n){log(t+"("+e+") deleted.")},a.onerror=function(n){log(t+"("+e+") error on deleting.")}},clearIndexedDB=function(){var e=indexedDB.deleteDatabase("CADV_DB");e.onsuccess=function(){states.iDBInit=!1,log("DB deleted successfully"),iDBInit()},e.onerror=function(){log("Unable to delete DB")},e.onblocked=function(){log("Unable to delete DB due to the operation being blocked")}},loadErrors=0,preload={images:{},audios:{},videos:{}},resources={images:{},audios:{},videos:{}},addPreloadResource=function(e,t,n){switch(e){case"image":preload.images[t]=n;break;case"audio":preload.audios[t]=n;break;case"video":preload.videos[t]=n;break;default:var r=e+" is not a valid resource type!";log(r),system.stopOnError&&error(r)}log(n+" is added to preload list!")},startPreloadResources=function(){if(states.startedPreload)return void log("Preload started");states.startedPreload=!0,iDBInit();var e=setInterval(function(){states.iDBInit&&(clearInterval(e),o())},100),t=function(e,t,o){null!=o?r(e,t,o):n(e,t,preload[e][t])},n=function(e,t,n){var o=new XMLHttpRequest;o.open("GET",n,!0),o.responseType="arraybuffer",o.onload=function(o){var a=(void 0).response,i=new Blob([a]),s=i;"audios"===e&&(s=a),storeToIndexedDB(e,t,s),r(e,t,s),log(n+" loaded!")},o.onerror=function(e){var t=n+" error! (Request)";loadErrors+=1,log(t),system.stopOnError&&error(t)},o.onprogress=function(e){e.lengthComputable},o.setRequestHeader("CADV-ENGINE","1.0"),o.send()},r=function(e,t,n){switch(e){case"images":var r=new Image;r.src=URL.createObjectURL(n),resources.images[t]=r;break;case"videos":var o=document.createElement("video");o.src=URL.createObjectURL(n),resources.videos[t]=o;break;case"audios":audio.context.decodeAudioData(n,function(n){resources.audios[t]=n,log(t+"("+e+") decoded!")},function(){var n=t+"("+e+") error! (Decode)";loadErrors+=1,log(n),system.stopOnError&&error(n)})}},o=function(){initAudio()||(log("Unable to create audio context. Web Audio API might be not available."),log("No audio will be loaded."),preload.audios={});for(var e=0,n=Object.keys(preload);e<n.length;e++){var r=n[e];if($.isEmptyObject(preload[r]))log("Preload list of "+r+" is empty!");else{if("audios"===r&&!system.useAudio){log("Skipping audio list. (UseAudio disabled)");continue}log("Total of preload "+r+": "+Object.keys(preload[r]).length);for(var o=Object.keys(preload[r]),a=0;a<o.length;a++){var i=o[a];getFromIndexedDB(r,i,t)}}}}},customVars={},getCustomVariable=function(e){return void 0===customVars[e]?null:customVars[e]},setCustomVariable=function(e,t){return customVars[e]=t,customVars[e]},audio={context:null},initAudio=function(){if(system.useAudio){if("undefined"!=typeof AudioContext){audio.context=new AudioContext,audio.master=audio.context.createGain(),audio.master.gain.value=system.masterVolume,audio.master.connect(audio.context.destination);for(var e=["bgm","sfx","voice"],t=0;t<e.length;t++){var n=e[t];audio[n]=audio.context.createGain(),audio[n].gain.value=system[n+"Volume"],audio[n].connect(audio.master),audio[n+"out"]=audio.context.createBufferSource(),audio[n+"out"].connect(audio[n])}return!0}return system.useAudio=!1,!1}return!1},playAudio=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("bgm"===e&&(n=!0),"sfx"!==e||n)audio[e+"out"].buffer=resources.audios[t],audio[e+"out"].loop=n,audio[e+"out"].start(0);else{var r=audio.context.createBufferSource();r.buffer=resources.audios[t],r.connect(audio.sfx),r.start(0)}},playCrossfadeBGM=function(e,t){var n=audio.context.createGain();n.gain.value=0,n.connect(audio.master);var r=audio.context.createBufferSource();r.buffer=resources.audios[e],r.loop=!0,r.connect(n),r.start(0),log("Crossfade begin!")},stopAudio=function(e){audio[e+"out"].stop()},textOutCSS={position:"absolute","font-family":"Meiryo UI, Hiragino Maru Gothic ProN","font-size":"16px","line-height":"16px",left:"16px",top:"16px",color:"#FFFAFA",overflow:"visible",cursor:"default"},choiceBoxCSS={width:"240px",height:"48px",color:"#111111","text-align":"center","line-height":"48px",border:"solid 1px #999999","border-radius":"4px",margin:"12px 0 12px",cursor:"default",opacity:"0"},choiceBoxHoverCSS={"font-size":"1.125em",color:"#666666",border:"solid 1px #7777FF",opacity:"0.9"},setCSSValue=function setCSSValue(componentName,propertyName,propertyValue){return"textOut"!==componentName&&"choiceBox"!==componentName&&"choiceBoxHover"!==componentName?(log("Invalid componentName!"),null):(void 0===propertyValue||null===propertyValue||""===propertyValue?eval("delete "+componentName+"CSS['"+propertyName+"'];"):eval(componentName+"CSS['"+propertyName+"'] = '"+propertyValue+"';"),eval(componentName+"CSS"))},canvas=void 0,canvasContext=void 0,oldObjects={backgrounds:{},characters:{},messagewindow:{}},detailObjects={backgrounds:{},characters:{},messagewindow:{}},performScaling=function(){system.screenScale=window.innerWidth/system.width,system.height*system.screenScale>window.innerHeight&&(system.screenScale=window.innerHeight/system.height),system.screenScale<.5&&(system.screenScale=.5),system.screenScale>1?(canvas.width=window.innerWidth,canvas.height=window.innerHeight):(canvas.width=system.width,canvas.height=system.height)},stopScaling=function(){system.autoScale=!1,system.screenScale=1,canvas.width=system.width,canvas.height=system.height},createImage=function(e,t,n,r){var o=resources.images[n],a=document.createElement("canvas"),i={id:t,canvasObject:a,imageObject:o,type:e,percentX:"0",percentY:"0",x:"0",y:"0",iWidth:o.width,iHeight:o.height,hFlip:"1",vFlip:"1",opac:"1",originX:"50%",originY:"50%",stretch:!1,stretchScale:"1",imageScale:"1",rotate:"0",xSlice:"1",ySlice:"1",xCount:"0",yCount:"0"};if(void 0!==r)for(var s=0,c=Object.keys(r);s<c.length;s++){var u=c[s];void 0!==i[u]&&(i[u]=r[u])}if(void 0!==r&&void 0!==r.parentId&&void 0!==r.childType){if(void 0===detailObjects[e][r.parentId])throw new Error("No such parent!");void 0===detailObjects[e][r.parentId][r.childType]&&(detailObjects[e][r.parentId][r.childType]={}),detailObjects[e][r.parentId][r.childType]=i}else detailObjects[e][t]=i;return t},drawDetail=function(e,t){void 0===oldObjects[e.type][e.id]&&Object.assign(oldObjects[e.type][e.id],e),e.canvasObject.width=canvas.width,e.canvasObject.height=canvas.height,void 0!==t&&(e.canvasObject.width=system.width,e.canvasObject.height=system.height);var n=e.canvasObject.getContext("2d"),r=canvas.width/e.imageObject.width;e.stretchScale=r,r*=e.imageScale,e.stretch?(e.iWidth=e.imageObject.width*e.imageScale,e.iHeight=e.imageObject.height*e.imageScale,n.scale(r*parseInt(e.hFlip,10),r*parseInt(e.vFlip,10))):n.scale(e.hFlip*e.imageScale,e.vFlip*e.imageScale);var o=e.originX,a=e.originY;0!==o.indexOf("%")&&(o=e.imageObject.width*(parseInt(o,10)/100)),0!==a.indexOf("%")&&(a=e.imageObject.height*(parseInt(a,10)/100)),n.translate(o,a),0!==parseInt(e.rotate,10)&&n.rotate(e.rotate*(Math.PI/180)),n.translate(-o,-a),n.globalAlpha=e.opac;var i=e.x,s=e.y,c=oldObjects[e.type][e.id].percentX,u=oldObjects[e.type][e.id].percentY;if(e.percentX!==c?(i=(e.iWidth-e.imageObject.width)/e.imageScale*(parseInt(e.percentX,10)/100)*-1,isFinite(i)||(i="0"),e.x=i):(e.percentX=e.x/((e.iWidth-e.imageObject.width)/e.imageScale)*-100,isFinite(e.percentX)||(e.percentX="0")),e.percentY!==u){var l=e.imageScale;e.stretch&&(l=e.stretchScale*e.imageScale),s=(e.imageObject.height-canvas.height/l)*(parseInt(e.percentY,10)/100)*-1,isFinite(s)||(s="0"),e.y=s}else e.percentY=e.y/((e.iHeight-e.imageObject.height)/e.imageObject.iScale)*-100,isFinite(e.percentY)||(e.percentY="0");if("1"===e.xSlice&&"1"===e.ySlice)n.drawImage(e.imageObject,0,0,e.imageObject.width,e.imageObject.height,i,s,e.imageObject.width,e.imageObject.height);else{var d=e.imageObject.width/e.xSlice,f=e.imageObject.height/e.ySlice,g=d*parseInt(e.xCount,10),m=f*parseInt(e.yCount,10);n.drawImage(e.imageObject,g,m,d,f,parseFloat(i)+parseFloat(t.x),parseFloat(s)+parseFloat(t.y),d,f)}return oldObjects[e.type][e.id]=$.extend({},e),"characters"===e.type&&void 0!==e.face&&n.drawImage((void 0).drawDetail(e.face,e),0,0),e.canvasObject},drawCanvas=function(){"1.0"!==system.screenscale&&(Math.round(window.innerWidth-system.width*system.screenScale),Math.round(window.innerHeight-system.height*system.screenScale));for(var e=0,t=Object.keys(detailObjects.backgrounds);e<t.length;e++){var n=t[e];isMobile()?canvasContext.drawImage((void 0).drawDetail(detailObjects.backgrounds[n]),0,0,canvas.width,canvas.height):canvasContext.drawImage((void 0).drawDetail(detailObjects.backgrounds[n]),0,0,system.width,system.height,0,0,system.width,system.height)}for(var r=0,o=Object.keys(detailObjects.characters);r<o.length;r++){var a=o[r];isMobile()?canvasContext.drawImage((void 0).drawDetail(detailObjects.characters[a]),0,0,canvas.width,canvas.height):canvasContext.drawImage((void 0).drawDetail(detailObjects.characters[a]),0,0,system.width,system.height,0,0,system.width,system.height)}for(var i=0,s=Object.keys(detailObjects.messagewindow);i<s.length;i++){var c=s[i];isMobile()?canvasContext.drawImage((void 0).drawDetail(detailObjects.messagewindow[c]),0,0,canvas.width,canvas.height):canvasContext.drawImage((void 0).drawDetail(detailObjects.messagewindow[c]),0,0,system.width,system.height,0,0,system.width,system.height)}},resetCanvas=function(){return canvasContext.clearRect(0,0,canvas.width,canvas.height),canvasContext.fillStyle=system.defaultBgColor,canvasContext.fillRect(0,0,canvas.width,canvas.height),canvasContext.fillStyle="",canvasContext.save(),canvasContext.scale(system.screenScale,system.screenScale),drawCanvas(),canvasContext.restore(),states.canvasRefresh},setPosition=function e(){if(!states.canvasRefresh)return void log("Not running yet. Do nothing.");if(void 0===detailObjects.messagewindow.base)return log("Message Window not ready!"),void setTimeout(e,1e3);if(1!==system.screenScale){Math.round(window.innerWidth-system.width*system.screenScale),Math.round(window.innerHeight-system.height*system.screenScale);system.screenScale<=.5&&0}},start=function(e){states.canvasRefresh=!0,void 0!==e&&"function"==typeof e&&e(),setPosition()},stop=function(){states.canvasRefresh=!1},canvasInit=function(e){canvas=document.createElement("canvas"),canvas.id="cadv",canvas.width=system.width,canvas.height=system.height,canvasContext=canvas.getContext("2d");for(var t="",n=0,r=Object.keys(textOutCSS);n<r.length;n++){var o=r[n];t+=o+":"+textOutCSS[o]+";"}t="div#textout{"+t+"}";for(var a="",i=0,s=Object.keys(choiceBoxCSS);i<s.length;i++){var c=s[i];a+=c+":"+choiceBoxCSS[c]+";"}a="div.choice{"+a+"}";for(var u="",l=0,d=Object.keys(choiceBoxHoverCSS);l<d.length;l++){var f=d[l];u+=f+":"+choiceBoxHoverCSS[f]+";"}u="div.choice.hovered{"+u+"}";var g=setInterval(function(){if(Object.keys(preload.images).length+Object.keys(preload.audios).length+(Object.keys(preload.videos).length-loadErrors)===Object.keys(resources.images).length+Object.keys(resources.audios).length+Object.keys(resources.videos).length){clearInterval(g);document.createElement("div").id="textout",system.autoScale&&performScaling(),void 0!==e&&"function"==typeof e&&e()}},500)},textWriter=function(e){var t=e.length,n=0,r=null,o=function e(){switch(t.charAt(n)){case"<":for(;">"!==t.charAt(n);)n+=1;break;case"&":for(;";"!==t.charAt(n);)n+=1;break;default:n+=1}n!==t&&states.outputingText?r=setTimeout(e,Math.floor(1e3/system.textSpeed)):states.outputingText=!1};states.outputingText=!0,r=setTimeout(o,Math.floor(1e3/system.textSpeed))};window.onresize=function(e){e.preventDefault(),system.autoScale&&performScaling(),setPosition()},window.onkeydown=function(e){e.preventDefault();e.location;switch(e.which){case 27:case 13:case 32:break;case 17:KeyboardEvent.DOM_KEY_LOCATION_RIGHT}},window.onkeyup=function(e){e.preventDefault();e.location;switch(e.which){case 17:KeyboardEvent.DOM_KEY_LOCATION_RIGHT}},window.onmousedown=function(e){e.preventDefault();var t=e.which},document.onselectstart=function(){return!1};var cadvGamepad=null,gpLoopTimer=void 0;return window.addEventListener("gamepadconnected",function(e){cadvGamepad=e.gamepad,gpLoopTimer=setInterval(function(){for(var e=0,t=cadvGamepad.buttons.length;e<t;e++);},1e3)}),window.addEventListener("gamepaddisconnected",function(e){clearInterval(gpLoopTimer),cadvGamepad=null}),{getSystemSetting:getSystemSetting,setSystemSetting:setSystemSetting,isMobile:isMobile,getCustomVariable:getCustomVariable,setCustomVariable:setCustomVariable,setCSSValue:setCSSValue}}()},function(e,t,n){(function(n){var r,o,a,i={scope:{}};i.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){if(n.get||n.set)throw new TypeError("ES3 does not support getters and setters.");e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},i.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:void 0!==n&&null!=n?n:e},i.global=i.getGlobal(this),i.SYMBOL_PREFIX="jscomp_symbol_",i.initSymbol=function(){i.initSymbol=function(){},i.global.Symbol||(i.global.Symbol=i.Symbol)},i.symbolCounter_=0,i.Symbol=function(e){return i.SYMBOL_PREFIX+(e||"")+i.symbolCounter_++},i.initSymbolIterator=function(){i.initSymbol();var e=i.global.Symbol.iterator;e||(e=i.global.Symbol.iterator=i.global.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&i.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return i.arrayIterator(this)}}),i.initSymbolIterator=function(){}},i.arrayIterator=function(e){var t=0;return i.iteratorPrototype(function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}})},i.iteratorPrototype=function(e){return i.initSymbolIterator(),e={next:e},e[i.global.Symbol.iterator]=function(){return this},e},i.array=i.array||{},i.iteratorFromArray=function(e,t){i.initSymbolIterator(),e instanceof String&&(e+="");var n=0,r={next:function(){if(n<e.length){var o=n++;return{value:t(o,e[o]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r},i.polyfill=function(e,t,n,r){if(t){for(n=i.global,e=e.split("."),r=0;r<e.length-1;r++){var o=e[r];o in n||(n[o]={}),n=n[o]}e=e[e.length-1],r=n[e],t=t(r),t!=r&&null!=t&&i.defineProperty(n,e,{configurable:!0,writable:!0,value:t})}},i.polyfill("Array.prototype.keys",function(e){return e||function(){return i.iteratorFromArray(this,function(e){return e})}},"es6-impl","es3");var s=this;!function(n,i){o=[],r=i,void 0!==(a="function"==typeof r?r.apply(t,o):r)&&(e.exports=a)}(0,function(){function e(e){if(!N.col(e))try{return document.querySelectorAll(e)}catch(e){}}function t(e,t){for(var n=e.length,r=2<=arguments.length?arguments[1]:void 0,o=[],a=0;a<n;a++)if(a in e){var i=e[a];t.call(r,i,a,e)&&o.push(i)}return o}function n(e){return e.reduce(function(e,t){return e.concat(N.arr(t)?n(t):t)},[])}function r(t){return N.arr(t)?t:(N.str(t)&&(t=e(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])}function o(e,t){return e.some(function(e){return e===t})}function a(e){var t,n={};for(t in e)n[t]=e[t];return n}function i(e,t){var n,r=a(e);for(n in e)r[n]=t.hasOwnProperty(n)?t[n]:e[n];return r}function c(e,t){var n,r=a(e);for(n in t)r[n]=N.und(e[n])?t[n]:e[n];return r}function u(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,n,r){return t+t+n+n+r+r});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);e=parseInt(t[1],16);var n=parseInt(t[2],16),t=parseInt(t[3],16);return"rgba("+e+","+n+","+t+",1)"}function l(e){function t(e,t,n){return 0>n&&(n+=1),1<n&&--n,n<1/6?e+6*(t-e)*n:.5>n?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var n=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e);e=parseInt(n[1])/360;var r=parseInt(n[2])/100,o=parseInt(n[3])/100,n=n[4]||1;if(0==r)o=r=e=o;else{var a=.5>o?o*(1+r):o+r-o*r,i=2*o-a,o=t(i,a,e+1/3),r=t(i,a,e);e=t(i,a,e-1/3)}return"rgba("+255*o+","+255*r+","+255*e+","+n+")"}function d(e){if(e=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e))return e[2]}function f(e){return-1<e.indexOf("translate")||"perspective"===e?"px":-1<e.indexOf("rotate")||-1<e.indexOf("skew")?"deg":void 0}function g(e,t){return N.fnc(e)?e(t.target,t.id,t.total):e}function m(e,t){if(t in e.style)return getComputedStyle(e).getPropertyValue(t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function h(e,t){return N.dom(e)&&o(V,t)?"transform":N.dom(e)&&(e.getAttribute(t)||N.svg(e)&&e[t])?"attribute":N.dom(e)&&"transform"!==t&&m(e,t)?"css":null!=e[t]?"object":void 0}function p(e,n){var r=f(n),r=-1<n.indexOf("scale")?1:0+r;if(!(e=e.style.transform))return r;for(var o=[],a=[],i=[],s=/(\w+)\((.+?)\)/g;o=s.exec(e);)a.push(o[1]),i.push(o[2]);return e=t(i,function(e,t){return a[t]===n}),e.length?e[0]:r}function v(e,t){switch(h(e,t)){case"transform":return p(e,t);case"css":return m(e,t);case"attribute":return e.getAttribute(t)}return e[t]||0}function b(e,t){var n=/^(\*=|\+=|-=)/.exec(e);if(!n)return e;var r=d(e)||0;switch(t=parseFloat(t),e=parseFloat(e.replace(n[0],"")),n[0][0]){case"+":return t+e+r;case"-":return t-e+r;case"*":return t*e+r}}function y(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function w(e){e=e.points;for(var t,n=0,r=0;r<e.numberOfItems;r++){var o=e.getItem(r);0<r&&(n+=y(t,o)),t=o}return n}function S(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return 2*Math.PI*e.getAttribute("r");case"rect":return 2*e.getAttribute("width")+2*e.getAttribute("height");case"line":return y({x:e.getAttribute("x1"),y:e.getAttribute("y1")},{x:e.getAttribute("x2"),y:e.getAttribute("y2")});case"polyline":return w(e);case"polygon":var t=e.points;return w(e)+y(t.getItem(t.numberOfItems-1),t.getItem(0))}}function x(e,t){function n(n){return n=void 0===n?0:n,e.el.getPointAtLength(1<=t+n?t+n:0)}var r=n(),o=n(-1),a=n(1);switch(e.property){case"x":return r.x;case"y":return r.y;case"angle":return 180*Math.atan2(a.y-o.y,a.x-o.x)/Math.PI}}function O(e,t){var n,r=/-?\d*\.?\d+/g;if(n=N.pth(e)?e.totalLength:e,N.col(n))if(N.rgb(n)){var o=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(n);n=o?"rgba("+o[1]+",1)":n}else n=N.hex(n)?u(n):N.hsl(n)?l(n):void 0;else o=(o=d(n))?n.substr(0,n.length-o.length):n,n=t&&!/\s/g.test(n)?o+t:o;return n+="",{original:n,numbers:n.match(r)?n.match(r).map(Number):[0],strings:N.str(e)||t?n.split(r):[]}}function j(e){return e=e?n(N.arr(e)?e.map(r):r(e)):[],t(e,function(e,t,n){return n.indexOf(e)===t})}function I(e){var t=j(e);return t.map(function(e,n){return{target:e,id:n,total:t.length}})}function C(e,t){var n=a(t);if(N.arr(e)){var o=e.length;2!==o||N.obj(e[0])?N.fnc(t.duration)||(n.duration=t.duration/o):e={value:e}}return r(e).map(function(e,n){return n=n?0:t.delay,e=N.obj(e)&&!N.pth(e)?e:{value:e},N.und(e.delay)&&(e.delay=n),e}).map(function(e){return c(e,n)})}function D(e,t){var n,r={};for(n in e){var o=g(e[n],t);N.arr(o)&&(o=o.map(function(e){return g(e,t)}),1===o.length&&(o=o[0])),r[n]=o}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}function B(e){return N.arr(e)?L.apply(this,e):R[e]}function k(e,t){var n;return e.tweens.map(function(r){r=D(r,t);var o=r.value,a=v(t.target,e.name),i=n?n.to.original:a,i=N.arr(o)?o[0]:i,s=b(N.arr(o)?o[1]:o,i),a=d(s)||d(i)||d(a);return r.from=O(i,a),r.to=O(s,a),r.start=n?n.end:e.offset,r.end=r.start+r.delay+r.duration,r.easing=B(r.easing),r.elasticity=(1e3-Math.min(Math.max(r.elasticity,1),999))/1e3,r.isPath=N.pth(o),r.isColor=N.col(r.from.original),r.isColor&&(r.round=1),n=r})}function F(e,r){return t(n(e.map(function(e){return r.map(function(t){var n=h(e.target,t.name);if(n){var r=k(t,e);t={type:n,property:t.name,animatable:e,tweens:r,duration:r[r.length-1].end,delay:r[0].delay}}else t=void 0;return t})})),function(e){return!N.und(e)})}function A(e,t,n,r){var o="delay"===e;return t.length?(o?Math.min:Math.max).apply(Math,t.map(function(t){return t[e]})):o?r.delay:n.offset+r.delay+r.duration}function E(e){var t,n=i(P,e),r=i(T,e),o=I(e.targets),a=[],s=c(n,r);for(t in e)s.hasOwnProperty(t)||"targets"===t||a.push({name:t,offset:s.offset,tweens:C(e[t],r)});return e=F(o,a),c(n,{children:[],animatables:o,animations:e,duration:A("duration",e,n,r),delay:A("delay",e,n,r)})}function M(e){function n(){return window.Promise&&new Promise(function(e){return d=e})}function r(e){return g.reversed?g.duration-e:e}function o(e){for(var n=0,r={},o=g.animations,a=o.length;n<a;){var i=o[n],s=i.animatable,c=i.tweens,u=c.length-1,l=c[u];u&&(l=t(c,function(t){return e<t.end})[0]||l);for(var c=Math.min(Math.max(e-l.start-l.delay,0),l.duration)/l.duration,d=isNaN(c)?1:l.easing(c,l.elasticity),c=l.to.strings,f=l.round,u=[],h=void 0,h=l.to.numbers.length,p=0;p<h;p++){var v=void 0,v=l.to.numbers[p],b=l.from.numbers[p],v=l.isPath?x(l.value,d*v):b+d*(v-b);f&&(l.isColor&&2<p||(v=Math.round(v*f)/f)),u.push(v)}if(l=c.length)for(h=c[0],d=0;d<l;d++)f=c[d+1],p=u[d],isNaN(p)||(h=f?h+(p+f):h+(p+" "));else h=u[0];Y[i.type](s.target,i.property,h,r,s.id),i.currentValue=h,n++}if(n=Object.keys(r).length)for(o=0;o<n;o++)_||(_=m(document.body,"transform")?"transform":"-webkit-transform"),g.animatables[o].target.style[_]=r[o].join(" ");g.currentTime=e,g.progress=e/g.duration*100}function a(e){g[e]&&g[e](g)}function i(){g.remaining&&!0!==g.remaining&&g.remaining--}function s(e){var t=g.duration,s=g.offset,m=s+g.delay,h=g.currentTime,p=g.reversed,v=r(e);if(g.children.length){var b=g.children,y=b.length;if(v>=g.currentTime)for(var w=0;w<y;w++)b[w].seek(v);else for(;y--;)b[y].seek(v)}(v>=m||!t)&&(g.began||(g.began=!0,a("begin")),a("run")),v>s&&v<t?o(v):(v<=s&&0!==h&&(o(0),p&&i()),(v>=t&&h!==t||!t)&&(o(t),p||i())),a("update"),e>=t&&(g.remaining?(u=c,"alternate"===g.direction&&(g.reversed=!g.reversed)):(g.pause(),g.completed||(g.completed=!0,a("complete"),"Promise"in window&&(d(),f=n()))),l=0)}e=void 0===e?{}:e;var c,u,l=0,d=null,f=n(),g=E(e);return g.reset=function(){var e=g.direction,t=g.loop;for(g.currentTime=0,g.progress=0,g.paused=!0,g.began=!1,g.completed=!1,g.reversed="reverse"===e,g.remaining="alternate"===e&&1===t?2:t,o(0),e=g.children.length;e--;)g.children[e].reset()},g.tick=function(e){c=e,u||(u=c),s((l+c-u)*M.speed)},g.seek=function(e){s(r(e))},g.pause=function(){var e=q.indexOf(g);-1<e&&q.splice(e,1),g.paused=!0},g.play=function(){g.paused&&(g.paused=!1,u=0,l=r(g.currentTime),q.push(g),H||G())},g.reverse=function(){g.reversed=!g.reversed,u=0,l=r(g.currentTime)},g.restart=function(){g.pause(),g.reset(),g.play()},g.finished=f,g.reset(),g.autoplay&&g.play(),g}var _,P={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,offset:0},T={duration:1e3,delay:0,easing:"easeOutElastic",elasticity:500,round:0},V="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY perspective".split(" "),N={arr:function(e){return Array.isArray(e)},obj:function(e){return-1<Object.prototype.toString.call(e).indexOf("Object")},pth:function(e){return N.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},dom:function(e){return e.nodeType||N.svg(e)},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return N.hex(e)||N.rgb(e)||N.hsl(e)}},L=function(){function e(e,t,n){return(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e}return function(t,n,r,o){if(0<=t&&1>=t&&0<=r&&1>=r){var a=new Float32Array(11);if(t!==n||r!==o)for(var i=0;11>i;++i)a[i]=e(.1*i,t,r);return function(i){if(t===n&&r===o)return i;if(0===i)return 0;if(1===i)return 1;for(var s=0,c=1;10!==c&&a[c]<=i;++c)s+=.1;--c;var c=s+(i-a[c])/(a[c+1]-a[c])*.1,u=3*(1-3*r+3*t)*c*c+2*(3*r-6*t)*c+3*t;if(.001<=u){for(s=0;4>s&&0!==(u=3*(1-3*r+3*t)*c*c+2*(3*r-6*t)*c+3*t);++s)var l=e(c,t,r)-i,c=c-l/u;i=c}else if(0===u)i=c;else{var c=s,s=s+.1,d=0;do{l=c+(s-c)/2,u=e(l,t,r)-i,0<u?s=l:c=l}while(1e-7<Math.abs(u)&&10>++d);i=l}return e(i,n,o)}}}}(),R=function(){function e(e,t){return 0===e||1===e?e:-Math.pow(2,10*(e-1))*Math.sin(2*(e-1-t/(2*Math.PI)*Math.asin(1))*Math.PI/t)}var t,n="Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),r={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],e],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(t,n){return 1-e(1-t,n)}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(t,n){return.5>t?e(2*t,n)/2:1-e(-2*t+2,n)/2}]},o={linear:L(.25,.25,.75,.75)},a={};for(t in r)a.type=t,r[a.type].forEach(function(e){return function(t,r){o["ease"+e.type+n[r]]=N.fnc(t)?t:L.apply(s,t)}}(a)),a={type:a.type};return o}(),Y={css:function(e,t,n){return e.style[t]=n},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,n,r,o){r[o]||(r[o]=[]),r[o].push(t+"("+n+")")}},q=[],H=0,G=function(){function e(){H=requestAnimationFrame(t)}function t(t){var n=q.length;if(n){for(var r=0;r<n;)q[r]&&q[r].tick(t),r++;e()}else cancelAnimationFrame(H),H=0}return e}();return M.version="2.2.0",M.speed=1,M.running=q,M.remove=function(e){e=j(e);for(var t=q.length;t--;)for(var n=q[t],r=n.animations,a=r.length;a--;)o(e,r[a].animatable.target)&&(r.splice(a,1),r.length||n.pause())},M.getValue=v,M.path=function(t,n){var r=N.str(t)?e(t)[0]:t,o=n||100;return function(e){return{el:r,property:e,totalLength:S(r)*(o/100)}}},M.setDashoffset=function(e){var t=S(e);return e.setAttribute("stroke-dasharray",t),t},M.bezier=L,M.easings=R,M.timeline=function(e){var t=M(e);return t.pause(),t.duration=0,t.add=function(n){return t.children.forEach(function(e){e.began=!0,e.completed=!0}),r(n).forEach(function(n){var r=c(n,i(T,e||{}));r.targets=r.targets||e.targets,n=t.duration;var o=r.offset;r.autoplay=!1,r.direction=t.direction,r.offset=N.und(o)?n:b(o,n),t.began=!0,t.completed=!0,t.seek(r.offset),r=M(r),r.began=!0,r.completed=!0,r.duration>n&&(t.duration=r.duration),t.children.push(r)}),t.seek(0),t.reset(),t.autoplay&&t.restart(),t},t},M.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},M})}).call(t,n(2))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){/*!
* screenfull
* v3.3.2 - 2017-10-27
* (c) Sindre Sorhus; MIT License
*/
!function(){"use strict";var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},n=void 0!==e&&e.exports,r="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,o=function(){for(var e,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,o=n.length,a={};r<o;r++)if((e=n[r])&&e[1]in t){for(r=0;r<e.length;r++)a[n[0][r]]=e[r];return a}return!1}(),a={change:o.fullscreenchange,error:o.fullscreenerror},i={request:function(e){var n=o.requestFullscreen;e=e||t.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?e[n]():e[n](r&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){t[o.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,n){var r=a[e];r&&t.addEventListener(r,n,!1)},off:function(e,n){var r=a[e];r&&t.removeEventListener(r,n,!1)},raw:o};if(!o)return void(n?e.exports=!1:window.screenfull=!1);Object.defineProperties(i,{isFullscreen:{get:function(){return Boolean(t[o.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[o.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(t[o.fullscreenEnabled])}}}),n?e.exports=i:window.screenfull=i}()}])});